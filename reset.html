<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Redireccionando…</title>
    <script>
      // Extraer fragmento del token en la URL actual
      const urlParams = new URLSearchParams(window.location.search);
      const token = urlParams.get('token');
      const type = urlParams.get('type');

      // Si es recuperación de contraseña, redirigir a la app con deep link
      if (type === 'recovery' && token) {
        // Aquí Supabase no te da access_token, sino token_hash. Así que debes usar `token` en verifyOtp
        window.location.href = `laia://auth/reset-password?token_hash=${token}&type=recovery`;
      } else {
        // Fallback por si hay otro tipo
        window.location.href = 'laia://';
      }
    </script>
  </head>
  <body>
    <p>Redirigiendo a la app…</p>
  </body>
</html>
